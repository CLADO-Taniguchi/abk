<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>プロジェクト構造とデータフロー</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 20px;
            background: #f8f9fa;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #2d3748;
            margin-bottom: 30px;
            border-bottom: 3px solid #4299e1;
            padding-bottom: 10px;
        }
        
        .tree-structure {
            background: #f7fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 25px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.8;
        }
        
        .tree-line {
            margin: 3px 0;
            color: #2d3748;
        }
        
        .tree-branch {
            color: #718096;
        }
        
        .file-name {
            color: #1a202c;
            font-weight: 500;
        }
        
        .role {
            color: #4a5568;
            font-style: normal;
        }
        
        .arrow {
            color: #4299e1;
            margin: 0 8px;
        }
        
        .estimated {
            color: #e53e3e;
            font-weight: bold;
        }
        
        .provided {
            color: #38a169;
            font-weight: bold;
        }
        
        h2 {
            color: #2d3748;
            margin-top: 40px;
            margin-bottom: 20px;
            border-left: 4px solid #4299e1;
            padding-left: 15px;
        }
        
        .flow-section {
            background: #f7fafc;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .flow-step {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            padding: 15px;
            margin: 10px 0;
            transition: all 0.3s ease;
        }
        
        .flow-step:hover {
            border-color: #4299e1;
            box-shadow: 0 2px 10px rgba(66, 153, 225, 0.1);
        }
        
        .step-title {
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 8px;
        }
        
        .step-desc {
            color: #4a5568;
            font-size: 14px;
        }
        
        .copy-btn {
            background: #4299e1;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            float: right;
            margin-top: 10px;
            transition: background 0.3s ease;
        }
        
        .copy-btn:hover {
            background: #3182ce;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>📁 プロジェクト構造</h1>
        
        <div class="tree-structure">
<div class="tree-line">anabuki-work/</div>
<div class="tree-line"><span class="tree-branch">├──</span> <span class="file-name">go.mod</span> <span class="arrow">←</span> <span class="role">Goプロジェクト設定</span></div>
<div class="tree-line"><span class="tree-branch">├──</span> <span class="file-name">unload.sql</span> <span class="arrow">←</span> <span class="role">生データ抽出クエリ（S3出力）</span></div>
<div class="tree-line"><span class="tree-branch">├──</span> <span class="file-name">main.go</span> <span class="arrow">←</span> <span class="role">コンテンツ分析用データ生成（3段階ファネル）</span></div>
<div class="tree-line"><span class="tree-branch">├──</span> <span class="file-name">main_c.go</span> <span class="arrow">←</span> <span class="role">コンテンツ分析用データ生成（2段階ファネル）</span></div>
<div class="tree-line"><span class="tree-branch">├──</span> <span class="file-name">param_main.go</span> <span class="arrow">←</span> <span class="role estimated">パラメータ分析用データ生成（推定）</span></div>
<div class="tree-line"><span class="tree-branch">│</span></div>
<div class="tree-line"><span class="tree-branch">├──</span> <span class="file-name">master/</span> <span class="arrow">←</span> <span class="role">マスターデータ</span></div>
<div class="tree-line"><span class="tree-branch">│   ├──</span> <span class="file-name">subject_content.csv</span> <span class="arrow">←</span> <span class="role">URL→説明変数マッピング</span></div>
<div class="tree-line"><span class="tree-branch">│   ├──</span> <span class="file-name">bukken.txt</span> <span class="arrow">←</span> <span class="role">物件名→物件タイプマッピング</span></div>
<div class="tree-line"><span class="tree-branch">│   ├──</span> <span class="file-name">subject_property.csv</span> <span class="arrow">←</span> <span class="role">物件情報マスター</span></div>
<div class="tree-line"><span class="tree-branch">│   └──</span> <span class="file-name">real_date_type_a.csv</span> <span class="arrow">←</span> <span class="role">実際の日付データ（修正版）</span></div>
<div class="tree-line"><span class="tree-branch">│</span></div>
<div class="tree-line"><span class="tree-branch">├──</span> <span class="file-name">logdata/</span> <span class="arrow">←</span> <span class="role">ログデータ</span></div>
<div class="tree-line"><span class="tree-branch">│   ├──</span> <span class="file-name">target_customer_logdata.csv</span> <span class="arrow">←</span> <span class="role">全顧客の生ログデータ（S3から取得）</span></div>
<div class="tree-line"><span class="tree-branch">│   ├──</span> <span class="file-name">type_a_fannel_a_logdata.csv</span> <span class="arrow">←</span> <span class="role">物件タイプA_ファネルA用ログ</span></div>
<div class="tree-line"><span class="tree-branch">│   ├──</span> <span class="file-name">type_b_fannel_a_logdata.csv</span> <span class="arrow">←</span> <span class="role">物件タイプB_ファネルA用ログ</span></div>
<div class="tree-line"><span class="tree-branch">│   ├──</span> <span class="file-name">type_c_fannel_a_logdata.csv</span> <span class="arrow">←</span> <span class="role">物件タイプC_ファネルA用ログ</span></div>
<div class="tree-line"><span class="tree-branch">│   ├──</span> <span class="file-name">type_d_fannel_a_logdata.csv</span> <span class="arrow">←</span> <span class="role">物件タイプD_ファネルA用ログ</span></div>
<div class="tree-line"><span class="tree-branch">│   ├──</span> <span class="file-name">type_a_fannel_c_logdata.csv</span> <span class="arrow">←</span> <span class="role">物件タイプA_ファネルC用ログ</span></div>
<div class="tree-line"><span class="tree-branch">│   ├──</span> <span class="file-name">type_b_fannel_c_logdata.csv</span> <span class="arrow">←</span> <span class="role">物件タイプB_ファネルC用ログ</span></div>
<div class="tree-line"><span class="tree-branch">│   ├──</span> <span class="file-name">type_c_fannel_c_logdata.csv</span> <span class="arrow">←</span> <span class="role">物件タイプC_ファネルC用ログ</span></div>
<div class="tree-line"><span class="tree-branch">│   └──</span> <span class="file-name">type_d_fannel_c_logdata.csv</span> <span class="arrow">←</span> <span class="role">物件タイプD_ファネルC用ログ</span></div>
<div class="tree-line"><span class="tree-branch">│</span></div>
<div class="tree-line"><span class="tree-branch">├──</span> <span class="file-name">customer/</span> <span class="arrow">←</span> <span class="role">顧客リスト</span></div>
<div class="tree-line"><span class="tree-branch">│   └──</span> <span class="file-name">type_a_fannel_a.csv</span> <span class="arrow">←</span> <span class="role">物件タイプAの対象顧客リスト</span></div>
<div class="tree-line"><span class="tree-branch">│</span></div>
<div class="tree-line"><span class="tree-branch">├──</span> <span class="file-name">content/</span> <span class="arrow">←</span> <span class="role">コンテンツ分析結果</span></div>
<div class="tree-line"><span class="tree-branch">│   ├──</span> <span class="file-name">result_fannel_a/</span></div>
<div class="tree-line"><span class="tree-branch">│   │   ├──</span> <span class="file-name">document_content_type_A_fannel_a.csv</span> <span class="arrow">←</span> <span class="role">資料請求まで（物件タイプA）</span></div>
<div class="tree-line"><span class="tree-branch">│   │   ├──</span> <span class="file-name">viewing_content_type_A_fannel_a.csv</span> <span class="arrow">←</span> <span class="role">来場まで（物件タイプA）</span></div>
<div class="tree-line"><span class="tree-branch">│   │   ├──</span> <span class="file-name">contract_content_type_A_fannel_a.csv</span> <span class="arrow">←</span> <span class="role">成約まで（物件タイプA）</span></div>
<div class="tree-line"><span class="tree-branch">│   │   └──</span> <span class="file-name">（B,C,D タイプも同様）</span></div>
<div class="tree-line"><span class="tree-branch">│   └──</span> <span class="file-name">result_fannel_c/</span></div>
<div class="tree-line"><span class="tree-branch">│       ├──</span> <span class="file-name">viewing_content_type_A_fannel_c.csv</span> <span class="arrow">←</span> <span class="role">来場まで（物件タイプA）</span></div>
<div class="tree-line"><span class="tree-branch">│       ├──</span> <span class="file-name">contract_content_type_A_fannel_c.csv</span> <span class="arrow">←</span> <span class="role">成約まで（物件タイプA）</span></div>
<div class="tree-line"><span class="tree-branch">│       └──</span> <span class="file-name">（B,C,D タイプも同様）</span></div>
<div class="tree-line"><span class="tree-branch">│</span></div>
<div class="tree-line"><span class="tree-branch">├──</span> <span class="file-name">param/</span> <span class="arrow">←</span> <span class="role estimated">パラメータ分析結果（推定）</span></div>
<div class="tree-line"><span class="tree-branch">│   └──</span> <span class="file-name">result_fannel_a/</span></div>
<div class="tree-line"><span class="tree-branch">│       ├──</span> <span class="file-name">document_parameter_type_a_fannel_a.csv</span> <span class="arrow">←</span> <span class="role estimated">資料請求まで（パラメータ）</span></div>
<div class="tree-line"><span class="tree-branch">│       ├──</span> <span class="file-name">viewing_parameter_type_a_fannel_a.csv</span> <span class="arrow">←</span> <span class="role estimated">来場まで（パラメータ）</span></div>
<div class="tree-line"><span class="tree-branch">│       └──</span> <span class="file-name">contract_parameter_type_a_fannel_a.csv</span> <span class="arrow">←</span> <span class="role estimated">成約まで（パラメータ）</span></div>
<div class="tree-line"><span class="tree-branch">│</span></div>
<div class="tree-line"><span class="tree-branch">└──</span> <span class="file-name">python/</span> <span class="arrow">←</span> <span class="role">Python分析コード</span></div>
<div class="tree-line">    <span class="tree-branch">├──</span> <span class="file-name">main.py</span> <span class="arrow">←</span> <span class="role">main.goのPython版</span></div>
<div class="tree-line">    <span class="tree-branch">├──</span> <span class="file-name">main_c.py</span> <span class="arrow">←</span> <span class="role">main_c.goのPython版</span></div>
<div class="tree-line">    <span class="tree-branch">├──</span> <span class="file-name">create_csv_log_type_a_fannel_a.py</span> <span class="arrow">←</span> <span class="role">物件タイプA用データ前処理</span></div>
<div class="tree-line">    <span class="tree-branch">├──</span> <span class="file-name">analyze_content_type_a_fannel_a.py</span> <span class="arrow">←</span> <span class="role">コンテンツ効果統計分析</span></div>
<div class="tree-line">    <span class="tree-branch">└──</span> <span class="file-name">analyze_parameter_type_a_fannel_a.py</span> <span class="arrow">←</span> <span class="role">パラメータ効果統計分析</span></div>
        </div>

        <h2>🔄 データフロー</h2>
        
        <div class="flow-section">
            <div class="flow-step">
                <div class="step-title">1. 生データ抽出</div>
                <div class="step-desc">unload.sql → S3 → target_customer_logdata.csv</div>
            </div>
            
            <div class="flow-step">
                <div class="step-title">2. データ前処理</div>
                <div class="step-desc">create_csv_log_type_a_fannel_a.py → type_*_fannel_*_logdata.csv</div>
            </div>
            
            <div class="flow-step">
                <div class="step-title">3A. コンテンツファネル分析</div>
                <div class="step-desc">main.go / main_c.go → content/result_fannel_*/</div>
            </div>
            
            <div class="flow-step">
                <div class="step-title">3B. パラメータファネル分析</div>
                <div class="step-desc">param_main.go（推定）→ param/result_fannel_*/</div>
            </div>
            
            <div class="flow-step">
                <div class="step-title">4A. コンテンツ統計分析</div>
                <div class="step-desc">analyze_content_type_a_fannel_a.py → オッズ比レポート</div>
            </div>
            
            <div class="flow-step">
                <div class="step-title">4B. パラメータ統計分析</div>
                <div class="step-desc">analyze_parameter_type_a_fannel_a.py → 流入経路効果レポート</div>
            </div>
        </div>
        
        <button class="copy-btn" onclick="copyTreeStructure()">📋 ツリー構造をコピー</button>
    </div>

    <script>
        function copyTreeStructure() {
            const treeText = document.querySelector('.tree-structure').innerText;
            navigator.clipboard.writeText(treeText).then(() => {
                alert('ツリー構造をクリップボードにコピーしました！');
            });
        }
    </script>
</body>
</html>
